spring.application.name=EventPing

# ===============================
# Database Configuration
# ===============================
spring.datasource.url=jdbc:postgresql://localhost:5432/EventPing
spring.datasource.username=postgres
spring.datasource.password=abasthomas
spring.datasource.driver-class-name=org.postgresql.Driver

# Database Security Configuration
eventping.database.ssl.enabled=${DB_SSL_ENABLED:true}
eventping.database.ssl.mode=${DB_SSL_MODE:require}
eventping.database.ssl.cert-path=${DB_SSL_CERT_PATH:}
eventping.database.ssl.key-path=${DB_SSL_KEY_PATH:}
eventping.database.ssl.ca-cert-path=${DB_SSL_CA_CERT_PATH:}

# Connection Pool Security Settings
eventping.database.connection-pool.maximum-pool-size=${DB_MAX_POOL_SIZE:20}
eventping.database.connection-pool.minimum-idle=${DB_MIN_IDLE:5}
eventping.database.connection-pool.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
eventping.database.connection-pool.idle-timeout=${DB_IDLE_TIMEOUT:600000}
eventping.database.connection-pool.max-lifetime=${DB_MAX_LIFETIME:1800000}
eventping.database.connection-pool.leak-detection-threshold=${DB_LEAK_DETECTION_THRESHOLD:60000}

# Database Credential Security
eventping.database.credentials.rotation-enabled=${DB_CREDENTIAL_ROTATION:false}
eventping.database.credentials.rotation-interval=${DB_CREDENTIAL_ROTATION_INTERVAL:86400000}
eventping.database.monitoring.enabled=${DB_MONITORING_ENABLED:true}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.flyway.enabled=false
spring.jpa.show-sql=true    
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jackson.time-zone=UTC

# ===============================
# Security Configuration
# ===============================
# JWT Configuration
eventping.security.jwt.secret=${JWT_SECRET:defaultSecretKeyForDevelopmentOnlyChangeInProduction123456789}
eventping.security.jwt.expiration=86400000
eventping.security.jwt.refresh-expiration=604800000
eventping.security.jwt.issuer=EventPing
eventping.security.jwt.audience=EventPing-Users

# Password Security
eventping.security.password.bcrypt-rounds=12
eventping.security.password.min-length=8
eventping.security.password.require-special-chars=true

# Session Security
eventping.security.session.timeout=1800
eventping.security.session.max-concurrent=3
eventping.security.session.prevent-fixation=true

# CORS Configuration
eventping.security.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080}
eventping.security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
eventping.security.cors.allowed-headers=*
eventping.security.cors.allow-credentials=true
eventping.security.cors.max-age=3600

# Security Headers
eventping.security.headers.frame-options=DENY
eventping.security.headers.content-type-options=nosniff
eventping.security.headers.xss-protection=1; mode=block
eventping.security.headers.hsts.max-age=31536000
eventping.security.headers.hsts.include-subdomains=true
eventping.security.headers.csp=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# ===============================
# Rate Limiting Configuration
# ===============================
eventping.rate-limit.enabled=true
eventping.rate-limit.redis.enabled=false

# Global Rate Limits
eventping.rate-limit.global.requests-per-minute=1000
eventping.rate-limit.global.requests-per-hour=10000

# IP-based Rate Limits
eventping.rate-limit.ip.requests-per-minute=100
eventping.rate-limit.ip.requests-per-hour=1000
eventping.rate-limit.ip.block-duration=300

# User-based Rate Limits
eventping.rate-limit.user.api-requests-per-minute=60
eventping.rate-limit.user.api-requests-per-hour=1000

# Feature-specific Rate Limits
eventping.rate-limit.registration.attempts-per-hour=5
eventping.rate-limit.login.attempts-per-hour=10
eventping.rate-limit.event-creation.per-hour=10
eventping.rate-limit.participant-join.per-minute=5

# Plan-based Limits
eventping.rate-limit.free.max-events-per-day=3
eventping.rate-limit.free.max-participants-per-event=20
eventping.rate-limit.free.max-reminders-per-day=50

eventping.rate-limit.pro.max-events-per-day=100
eventping.rate-limit.pro.max-participants-per-event=500
eventping.rate-limit.pro.max-reminders-per-day=5000

# ===============================
# Input Validation Configuration
# ===============================
eventping.validation.sql-injection.enabled=true
eventping.validation.xss.enabled=true
eventping.validation.email.domain-validation=true
eventping.validation.file-upload.max-size=10MB
eventping.validation.file-upload.allowed-types=image/jpeg,image/png,image/gif,application/pdf

# ===============================
# Audit Logging Configuration
# ===============================
eventping.audit.enabled=true
eventping.audit.log-authentication=true
eventping.audit.log-authorization-failures=true
eventping.audit.log-data-modifications=true
eventping.audit.log-security-violations=true
eventping.audit.retention-days=90

# ===============================
# Cache Configuration
# ===============================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=300s

# Redis Configuration (for distributed caching and rate limiting)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ===============================
# Task Scheduling
# ===============================
spring.task.scheduling.pool.size=5

# ===============================
# Reminder Defaults (Seeded)
# ===============================
eventping.reminder.defaults=60,1440
# 60 = 1 hour, 1440 = 1 day (in minutes)

# ===============================
# Public Links
# ===============================
eventping.public.base-url=https://eventping.app/e/

# ===============================
# Logging Configuration
# ===============================
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.thomas.com.EventPing=DEBUG

# Security-specific logging
logging.level.org.springframework.security.web.authentication=DEBUG
logging.level.org.springframework.security.web.access=DEBUG

# ===============================
# Actuator Configuration
# ===============================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.health.roles=ADMIN
management.info.env.enabled=true

# ===============================
# Email Configuration
# ===============================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=abasienyenethomas2@gmail.com
spring.mail.password=rbic eaid fzzu bveq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true